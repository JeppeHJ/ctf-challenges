# Ubuntu 24.04 LTS Server #2 (Secret Server)
Vagrant.configure("2") do |config|
  # If you have the eaaa base image, uncomment below
  config.vm.box = "eaaa-base"

  # Comment below 2 lines if you have the eaaa base image
  #config.vm.box = "hashicorp-education/ubuntu-24-04"
  #config.vm.box_version = "0.1.0"

  # Network settings - internal network only accessible from server1
  # This server is on a different subnet (10.0.1.0/24) not directly accessible from outside
  config.vm.network "private_network", ip: "10.0.1.20", auto_config: true

  # Configure VM resources
  config.vm.provider "virtualbox" do |vb|
    vb.memory = "1024"
    vb.cpus = 1
    vb.name = "secret-server"
  end

  # Provisioning scripts - keeping package installation for flexibility
  config.vm.provision "shell", path: "provision/01_packages.sh"
  config.vm.provision "shell", path: "provision/02_networking.sh"
  config.vm.provision "shell", path: "provision/03_secrets.sh"
  config.vm.provision "shell", path: "provision/04_ssh.sh"
  config.vm.provision "shell", path: "provision/05_firewall.sh"
end 